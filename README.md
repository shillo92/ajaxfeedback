AjaxFeedback
=========

jQuery plugin for handling the display of JSON messages sent using AJAX in order to provide relevant feedback for the user.

**In short - Simplifies AJAX messages.**

Version
----

**0.3.1**

0.3

0.2

0.1

Dependencies
-----------

AjaxFeedback depends solely on jQuery. The plugin was tested on jQuery v2.1.0, however it should also work with pre-historic versions of jQuery.

Installation
--------------
#### Through Volo
```sh
volo add shillo92/ajaxfeedback 
```

#### Through GitHub

```sh
git clone https://github.com/shillo92/ajaxfeedback myproject
```

RequireJS
------
Remember that this plugin depends jQuery so remember to either set it up in your requireJS configurations like so:
```javascript
require.config({
    shim: {
        'ajaxfeedback' : ['jquery']
    }
});
```
Or you can also load it through define/require:
```javascript
define(['jquery', 'ajaxfeedback'], function ($) {
    // Do whatever you want...
});
```

How to use
----
#### Options
```javascript
var settings = $.extend({
    /**
     * The data returned from the JSON response to the AJAX request.
     * Notice that a data-url/data-data attributes will override this setting.
     */
    returnedData : null,

    /**
     * Specify the number of seconds after which every message will be hidden. You can specify 0 (or any other
     * false value) if you do not want to hide it. Defaults to 5 seconds.
     */
    hideAfter : 5,

    /**
     * Maybe sounds a little scary but it's simply a method to create the HTML for the element that will contain
     * all the input messages.
     *
     * @param classname string. CSS classname generated by the plugin.
     * @returns {string} HTML string represents the input messages container.
     */
    formatMessagesContainer : function (classname) {
        return '<ul class="'+classname+'"></ul>';
    },

    /**
     * Called each message iteration to create an HTML message.
     *
     * @param inputClassname string. CSS Classname generated by the plugin.
     * @param inputMessage string. The text message returned from the JSON response.
     * @returns {string} HTML string represents the message.
     */
    formatMessage : function (inputClassname, inputMessage) {
        return '<li class="'+inputClassname+'">'+inputMessage+'</li>';
    },

    /**
     * Responsible for showing the message, by default shows it with a 'fadeIn' animation.
     *
     * This method is called in the context of the jQuery message element, therefore no parameters are passed.
     * Simply assume that 'this' is the jQuery message element.
     */
    messageShow : function () {
        this.fadeIn();
    },

    /**
     * Responsible for hiding the message (usually after a delay of couple seconds),
     * by default hides it with a 'fadeOut'.
     *
     * This method is called in the context of the jQuery message element, therefore no parameters are passed.
     * Simply assume that 'this' is the jQuery message element.
     */
    messageHide : function () {
        this.fadeOut();
    },

    /**
     * If specified, the data will be specified in this target element rather in this element.
     */
    target : null,

    /**
     * Will be used as part of each message class name.
     * Used in cases where a raw String is returned rather than array of messages, where the type of the message
     * cannot be told. By default "error" is used.
     */
    defaultMessageType : "error",

    /**
     * The name of the parameter returned from the JSON response (at the same level as the `messages` parameter),
     * indicates whether there was a good feedback or bad feedback.
     */
    successIndicatorParam: "success",

    /**
     * Triggered after successful feedback, meaning that the boolean `success` parameter in the JSON response
     * has positive (true) result.
     *
     * In the absence of success indicator parameter, these method will not be triggered.
     *
     * By default, this method does nothing.
     *
     * @param data The JSON data returned from the response.
     */
    onGoodFeedback: function(data) {
    },

    /**
     * Triggered after bad feedback, meaning that the boolean `success` parameter in the JSON response
     * has negative (false) result.
     *
     * In the absence of success indicator parameter, these method will not be triggered.
     *
     * By default, this method does nothing.
     *
     * @param data The JSON data returned from the response.
     */
    onBadFeedback: function(data) {
    }
}, options);
```

As of version 0.3, you can pass a `success` parameter to indicate whether the feedback is good or bad.

As of version 0.2, you can use `data` attributes, however notice that you also have to specify an element in the
`target` setting if you want it to work properly:
* `data-url` URL of a JSON file to interact with.
* `data-message` A message to show rather than a URL to a JSON file.
* `data-messagetype` If `data-message` is set then you can also specify the message type, for example: `error`, `success`, `info` or a custom one. By default this is set to `error`.

#### Instructions

* Create a placeholder element.
```html
<div id="messages"></div>
```
* Create a file to return JSON data.
* Load jQuery (Load the **AjaxFeedback** plugin).
```html
<script type="text/javascript" src="js/ajaxfeedback.js"></script>
```
* Within your main javascript code, make the following call to the plugin:
```javascript
$(document).ready(function () {
    $.getJSON("data/exampleFromArray.json", function (data) {
        $('#messages').ajaxFeedback({
            returnedData: data
        });
    });
});
```
* Fire your application

#### Example

The following example assumes you rely on [RequireJS](http://requirejs.org).

Inside *example.html*
```html
<!-- Pressing this button will fetch and display messages from JSON file -->
<button type="button" class="showMessage" data-url="data/exampleFromArray.json" id="showMessagesFromArray">Show Messages From JSON Array</button>
<!-- JSON response can also be a single string to be used as a message. 'error' message by default -->
<button type="button" class="showMessage" data-data="Simple string message" data-messagetype="success" id="showMessagesFromString">Show Message From JSON String</button>

<!-- We'll attach all messages to this div -->
<div id="messages"></div>
```

*data/exampleFromArray.json*
```json
{
    "messages" : {
        "error" : {
            "email" : [
                "Invalid email address supplied"
            ],
            "username" : [
                "Invalid username. Username can only contain alphabetic characters."
            ]
        },

        "success" : {
            "country" : [
                "Well, at least you specified a valid country name."
            ]
        },

        "info" : {
            "password" : [
                "Tip: you should specify a good password!"
            ]
        }
    }
}
```

*js/main.js*
```javascript
require(['jquery', 'ajaxfeedback'], function ($) {
    $(document).ready(function () {
        var $showMessageButtons = $('.showMessage');

        $($showMessageButtons).click(function () {
            var url = $showMessageButtons.data('url');
            // Make our #messages div into feedbacks container
            $(this).ajaxFeedback({
                target: '#messages'
            });
        });
    });
});
```

License
----

GPL


**This free plugin is provided to you by Shillo Ben David**

    